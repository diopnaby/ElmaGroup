{% extends "base.html" %}

{% block title %}Édition - ELMA Group{% endblock %}

{% block content %}
<section class="container py-5">
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h1 class="mb-3 text-primary">Édition</h1>
            <p class="lead text-muted">Découvrez notre catalogue de livres et les auteurs accompagnés par ELMA Group.</p>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="h4 text-secondary mb-3">Nos Livres</h2>
        </div>
        {% for book in books %}
        <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card h-100">
                {% if book.cover_image %}
                <img src="{{ book.cover_image }}" class="card-img-top" alt="{{ book.title }}" style="height: 180px; object-fit: cover;">
                {% endif %}
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ book.title }}</h5>
                    <p class="card-text small text-muted">{{ book.authors[0].name if book.authors else 'Auteur inconnu' }}</p>
                    <p class="card-text flex-grow-1">{{ book.description[:100] }}{% if book.description and book.description|length > 100 %}...{% endif %}</p>
                    <a href="{{ url_for('library.book_detail', slug=book.slug) }}" class="btn btn-outline-primary btn-sm mt-auto">Voir détails</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="h4 text-secondary mb-3">Nos Auteurs</h2>
        </div>
        {% for author in authors %}
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-4">
            <div class="card h-100 text-center">
                {% if author.photo %}
                <img src="{{ author.photo }}" class="rounded-circle mx-auto mt-3" alt="{{ author.name }}" style="width: 80px; height: 80px; object-fit: cover;">
                {% endif %}
                <div class="card-body">
                    <h6 class="card-title mb-1">{{ author.name }}</h6>
                    <p class="card-text small text-muted">{{ author.nationality or '' }}</p>
                    <a href="{{ url_for('library.authors') }}#author-{{ author.id }}" class="btn btn-link btn-sm">Voir profil</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}
